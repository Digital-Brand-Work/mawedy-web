<div
	*ngIf="opened$ | async"
	@slideInRight
	@slideOutRight
	stop-propagation
	class="ml-auto bg-white h-full w-full md:w-1/4"
>
	<modal-header
		modalTitle="New Appointment"
		(onClose)="opened$.next(false)"
	></modal-header>

	<div
		class="px-10 py-5 bg-white"
		style="max-height: calc(100vh - 5vh); overflow-y: scroll !important"
	>
		<div @expandCollapse *ngIf="branches$ | async" class="mb-5">
			<div class="mb-1 font-bold accent-color text-base">
				Select Clinic/Hospital Branch
			</div>

			<select
				class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
			>
				<option value="main">
					{{ (clinic$ | async).name }} (Main)
				</option>

				<option
					[value]="account.id"
					*ngFor="let account of branches$ | async; trackBy: identity"
				>
					{{ account.name || '@' + account.username }}
				</option>
			</select>
		</div>

		<div class="font-bold text-gray-500 mb-3">Patient Details</div>

		<div class="mb-5">
			<div class="mb-1 font-bold accent-color text-base">
				Patient Name
			</div>

			<input
				#input
				type="text"
				class="datalist py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
				list="patient-list"
			/>

			<datalist id="patient-list">
				<option
					*ngFor="let patient of patients$ | async; trackBy: identity"
				>
					{{ patient.first_name }} {{ patient.middle_name }}
					{{ patient.last_name }}
				</option>
			</datalist>

			<div class="text-sm text-rose-500">Patient Name is required.</div>
		</div>

		<div class="mb-5">
			<div class="mb-1 font-bold accent-color text-base">
				Select Department
			</div>

			<select
				class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
			>
				<option>Dentistry</option>
				<option>Cardiology</option>
				<option>Dentistry</option>
				<option>Cardiology</option>
			</select>

			<div class="text-sm text-rose-500">Department is required.</div>
		</div>

		<div class="mb-5">
			<div class="mb-1 font-bold accent-color text-base">
				Select Service
			</div>

			<select
				class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
			>
				<option>Dental Implant</option>
				<option>Veneers</option>
				<option>Dental Implant</option>
				<option>Veneers</option>
			</select>

			<div class="text-sm text-rose-500">Service is required.</div>
		</div>

		<div
			class="mb-5"
			(click)="dashboardAppointmentSelectDoctorModalOpened$.next(true)"
		>
			<div class="pointer-events-none">
				<div class="mb-1 font-bold accent-color text-base">
					Select Doctor
				</div>

				<select
					class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
				>
					<option>Select Doctor</option>
				</select>
			</div>
			<div class="text-sm text-rose-500">Doctor is required.</div>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-2 md:gap-x-5 items-center">
			<div class="mb-5">
				<div class="mb-1 font-bold accent-color text-base">
					Select date
				</div>

				<input
					type="date"
					class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
				/>

				<div class="text-sm text-rose-500">Date is required.</div>
			</div>

			<div
				(click)="
					dashboardAppointmentSelectTimeSlotModalOpened$.next(true)
				"
				class="mb-5"
			>
				<div class="pointer-events-none">
					<div class="mb-1 font-bold accent-color text-base">
						Select Time
					</div>

					<input
						type="time"
						class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
					/>
				</div>

				<div class="text-sm text-rose-500">Time is required.</div>
			</div>

			<div class="mb-5">
				<div class="mb-1 font-bold accent-color text-base">Amount</div>

				<input
					*ssrExclude
					[inputMask]="currencyInputMask"
					[formControl]="currencyFC"
					placeholder="AED 0.00"
					class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
				/>

				<div class="text-sm text-rose-500">Amount is required.</div>
			</div>

			<mat-radio-group class="-translate-y-2">
				<mat-radio-button value="1">Waiting Patient</mat-radio-button>
			</mat-radio-group>
		</div>

		<div class="mb-5">
			<div
				class="mb-1 font-bold accent-color text-base flex items-center"
			>
				<div>Comments</div>
				<div class="ml-auto text-gray-400">(Optional)</div>
			</div>

			<textarea
				(keyup)="autoGrow()"
				#comments
				class="py-3 px-4 rounded-md border-gray-300/80 border w-full focus:border-teal-500 focus:border-2 focus:shadow-md focus:shadow-teal-500/20"
			></textarea>
		</div>

		<div
			class="w-full py-5 z border-t border-t-gray-100 flex items-center mb-5"
		>
			<button
				mat-flat-button
				(click)="opened$.next(false)"
				class="hover:bg-gray-50 rounded-xl px-5 py-3 font-bold border-2 border-gray-300 text-gray-400 ml-auto mr-3"
			>
				Cancel
			</button>

			<button
				mat-flat-button
				class="hover:bg-emerald-600 rounded-xl px-5 py-3 font-bold text-white bg-emerald-500 border-2 border-emerald-500"
			>
				Schedule
			</button>
		</div>
	</div>
</div>
